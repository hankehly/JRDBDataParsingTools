models:
  - name: stg_jrdb__bac
    columns:
      # derived
      - name: レースキー
        tests:
          - not_null
      # original
      - name: レースキー_場コード
        tests:
          - not_null
          - relationships:
              to: ref('場コード')
              field: code
      - name: レースキー_年
        tests:
          - not_null
      - name: レースキー_回
        tests:
          - not_null
      - name: レースキー_日
        tests:
          - not_null
      - name: レースキー_Ｒ
        tests:
          - not_null
      - name: 年月日
        tests:
          - not_null
      - name: 発走時間
        tests:
          - not_null
      - name: レース条件_距離
        tests:
          - not_null
      - name: レース条件_トラック情報_芝ダ障害コード
        tests:
          - not_null
          - accepted_values:
              values: [1, 2, 3]
      - name: レース条件_トラック情報_右左
        tests:
          - not_null
          - accepted_values:
              values: [1, 2, 3, 9]
      - name: レース条件_トラック情報_内外
        tests:
          - not_null
          - accepted_values:
              values: [1, 2, 3, 9]
      - name: レース条件_種別
        tests:
          - not_null
      - name: レース条件_条件
        tests:
          - not_null
      - name: レース条件_記号
        tests:
          - not_null
          # - relationships:
          #     to: ref('特記コード')
          #     field: コード
      - name: レース条件_重量
        tests:
          - not_null
      - name: レース条件_グレード
      - name: レース名
      - name: 回数
      - name: 頭数
        tests:
          - not_null
      - name: コース
        tests:
          - accepted_values:
              values: [1, 2, 3, 4, 5, 6]
      - name: 開催区分
        tests:
          - not_null
          - accepted_values:
              values: [1, 2, 3]
      - name: レース名短縮
      - name: レース名９文字
        tests:
          - not_null
      - name: データ区分
        tests:
          - not_null
      - name: １着賞金
        tests:
          - not_null
      - name: ２着賞金
        tests:
          - not_null
      - name: ３着賞金
        tests:
          - not_null
      - name: ４着賞金
        tests:
          - not_null
      - name: ５着賞金
        tests:
          - not_null
      - name: １着算入賞金
        tests:
          - not_null
      - name: ２着算入賞金
        tests:
          - not_null
      - name: 馬券発売フラグ_単勝
        tests:
          - not_null
      - name: 馬券発売フラグ_複勝
        tests:
          - not_null
      - name: 馬券発売フラグ_枠連
        tests:
          - not_null
      - name: 馬券発売フラグ_馬連
        tests:
          - not_null
      - name: 馬券発売フラグ_馬単
        tests:
          - not_null
      - name: 馬券発売フラグ_ワイド
        tests:
          - not_null
      - name: 馬券発売フラグ_３連複
        tests:
          - not_null
      - name: 馬券発売フラグ_３連単
        tests:
          - not_null
      - name: WIN5フラグ

  - name: stg_jrdb__cha
    columns:
      # derived
      - name: レースキー
        tests:
          - not_null
      # original
      - name: レースキー_場コード
        tests:
          - not_null
          - relationships:
              to: ref('場コード')
              field: code
      - name: レースキー_年
        tests:
          - not_null
      - name: レースキー_回
        tests:
          - not_null
      - name: レースキー_日
        tests:
          - not_null
      - name: レースキー_Ｒ
        tests:
          - not_null
      - name: 馬番
        tests:
          - not_null
      - name: 曜日
        tests:
          - not_null
      - name: 調教年月日
        tests:
          - not_null
      - name: 回数
        tests:
          - not_null
      - name: 調教コースコード # there's only 1 null value in the whole dataset..
        tests:
          - relationships:
              to: ref('調教コースコード')
              field: コード
      - name: 追切種類
        tests:
          - accepted_values:
              values: [1, 2, 3]
      - name: 追い状態
        tests:
          - relationships:
              to: ref('追い状態コード')
              field: コード
      - name: 乗り役
        tests:
          - accepted_values:
              values: [1, 2, 3, 4, 5]
      - name: 調教Ｆ
        tests:
          - not_null
      - name: 時計分析データ_テンＦ
      - name: 時計分析データ_中間Ｆ
      - name: 時計分析データ_終いＦ
      - name: 時計分析データ_テンＦ指数
      - name: 時計分析データ_中間Ｆ指数
      - name: 時計分析データ_終いＦ指数
      - name: 時計分析データ_追切指数
      - name: 併せ馬相手データ_併せ結果
        tests:
          - accepted_values:
              values: [1, 2, 3]
      - name: 併せ馬相手データ_追切種類
        tests:
          - accepted_values:
              values: [1, 2, 3]
      - name: 併せ馬相手データ_年齢
      - name: 併せ馬相手データ_クラス
        tests:
          - relationships:
              to: ref('条件コード')
              field: code

  - name: stg_jrdb__cyb
    columns:
      # derived
      - name: レースキー
        tests:
          - not_null
      # original
      - name: レースキー_場コード
        tests:
          - not_null
          - relationships:
              to: ref('場コード')
              field: code
      - name: レースキー_年
        tests:
          - not_null
      - name: レースキー_回
        tests:
          - not_null
      - name: レースキー_日
        tests:
          - not_null
      - name: レースキー_Ｒ
        tests:
          - not_null
      - name: 馬番
        tests:
          - not_null
      - name: 調教タイプ # ??
      - name: 調教コース種別 # ??
        tests:
          - not_null
          - accepted_values:
              values: [0, 1, 2, 3, 4, 5]
      - name: 調教コース種類_坂
        tests:
          - not_null
      - name: 調教コース種類_Ｗ
        tests:
          - not_null
      - name: 調教コース種類_ダ
        tests:
          - not_null
      - name: 調教コース種類_芝
        tests:
          - not_null
      - name: 調教コース種類_プ
        tests:
          - not_null
      - name: 調教コース種類_障
        tests:
          - not_null
      - name: 調教コース種類_ポ
        tests:
          - not_null
      - name: 調教距離
        tests:
          - not_null
          - accepted_values:
              values: [0, 1, 2, 3, 4]
      - name: 調教重点
        tests:
          - not_null
          - accepted_values:
              values: [0, 1, 2, 3, 4]
      - name: 追切指数
      - name: 仕上指数
      - name: 調教量評価 # ?? where are these codes coming from
        description: A,B,C,Dに分類 (コード等の詳細説明は、【調教分析データ内容の説明】を参照してください。)
        tests:
          - accepted_values:
              values: ["A", "B", "C", "D"]
      - name: 仕上指数変化 # ?? where are these codes coming from
        tests:
          - accepted_values:
              values: [0, 1, 2, 3, 4]
      - name: 調教コメント
      - name: コメント年月日
      - name: 調教評価
        tests:
          - accepted_values:
              values: [1, 2, 3]
      - name: 一週前追切指数

      - name: 一週前追切コース
        description: 一週前追切の調教の追切コース (コード等の詳細説明は、【調教分析データ内容の説明】を参照してください。)
        tests:
          - relationships:
              to: ref('調教コースコード')
              field: コード
